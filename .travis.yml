sudo: false
dist: trusty
language: python
python:
  - "3.6"

install:
  - wget https://github.com/felipesanches/FontForge-Debian-Packaging/raw/ef44a71900da5eeef7a83cc4610027b860ef1903/libs.tar.gz
  - sudo tar xvzf libs.tar.gz
  - sudo cp home/travis/fforge_libs/* /usr -Rf
  - pip install fonttools
  - pip install https://github.com/doconce/preprocess/archive/master.zip
  - pip install fontbakery

script:
  - export PYTHONPATH=/usr/lib/python3.6/site-packages
  - make otf
  - make check
  - export DISABLE=" -x com.google.fonts/check/035" # ftxvalidator
  - export DISABLE="$DISABLE -x com.google.fonts/check/054" # only applies to TTF fonts
  - export DISABLE="$DISABLE -x com.google.fonts/check/056" # only applies to TTF fonts
  - export FB_OPTIONS="$DISABLE -l FAIL --no-progress"
  - fontbakery check-googlefonts LibertinusSans-*.otf $FB_OPTIONS

