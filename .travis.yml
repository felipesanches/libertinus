sudo: false
dist: xenial

install:
  - sudo apt-get install python3.6-dev
  - wget https://github.com/felipesanches/FontForge-Debian-Packaging/raw/6587b0c40d56685ee286b7ee0f25ffa7141a1cf5/fforge_with_py36.tar.gz
  - sudo tar xvzf fforge_with_py36.tar.gz
  - sudo cp home/travis/fforge_stuff/* /usr -Rf
  - pip install fonttools
  - pip install https://github.com/doconce/preprocess/archive/master.zip
  - pip install fontbakery

script:
  - export PYTHONPATH=/usr/lib/python3.6/site-packages
  - export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/lib/x86_64-linux-gnu/python3.6
  - make otf
  - make check
  - export DISABLE=" -x com.google.fonts/check/035" # ftxvalidator
  - export DISABLE="$DISABLE -x com.google.fonts/check/054" # only applies to TTF fonts
  - export DISABLE="$DISABLE -x com.google.fonts/check/056" # only applies to TTF fonts
  - export FB_OPTIONS="$DISABLE -l FAIL --no-progress"
  - fontbakery check-googlefonts LibertinusSans-*.otf $FB_OPTIONS

